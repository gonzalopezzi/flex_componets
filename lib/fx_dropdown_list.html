<!-- import polymer-element's definition -->
<link rel="import" href="../../packages/polymer/polymer.html">
<link rel="import" href="../../packages/flex_components/fx_item_renderer.html">
<link rel="import" href="../../packages/flex_components/fx_list.html">

<polymer-element name="fx-dropdown-list">
  <template>
    <style>
      :host {
        display: inline-block;
        position: relative;
      }
      
      #placeholder {
        display:block;
        outline: 0;
        width:100%;
        font-size: 11pt;
        text-align:left;
        box-sizing: border-box;
        background: #fff url("icon/arrow-down.png") no-repeat right center;
        border: 1px solid #CCC;
        border-radius: 3px;
        height: 30px;
        padding: 4px 24px 4px 4px;
        transition: all 0.2s ease-in-out;
      }
      
      #placeholder:hover {
        background-color: #ddd;
      }
      
      #placeholder.focused {
        -webkit-box-shadow: 0px 0px 4px 0px rgba(86, 182, 255, 0.75);
        -moz-box-shadow:    0px 0px 4px 0px rgba(86, 182, 255, 0.75);
        box-shadow:         0px 0px 4px 0px rgba(86, 182, 255, 0.75);
      }
      
      #fxlst {
        visibility: hidden;
        position: absolute;
        z-index: 990;
        top: 16px;
        width: 100%;
        height: 120px;
        margin-top: 2px;
        transition: all 0.2s ease-in-out;
        opacity: 0;
      }
      
      #fxlst.deployed {
        visibility: visible;
        opacity: 1;
        top: 32px;
      }
      
    </style>
    <button id="placeholder" on-click="{{toggleDeployed}}"
        on-focus="{{focusHandler}}" on-blur="{{blurHandler}}"
        class="{{ {focused:focused } }}">
      <template if="{{selectedItem == null}}">
        {{prompt}}
      </template>
      <template if="{{selectedItem != null}}">
        <template if="{{itemRenderer == null}}">
          {{render(selectedItem)}}
        </template>
        <template if="{{itemRenderer != null}}">
          <fx-item-renderer tag="{{itemRenderer}}" data="{{selectedItem}}"></fx-item-renderer>
        </template>
      </template>
    </button>
    <fx-list id="fxlst" 
        focusEnabled="false"
        focused="{{focused}}"
        dataProvider="{{dataProvider}}"
        selectedItem="{{selectedItem}}"
        itemRenderer="{{itemRenderer}}"
        labelField="{{labelField}}" 
        listHeight="{{listHeight}}"
        on-selection-change="{{onSelectionChangeHandler}}" ></fx-list>
  </template>
  <script type="application/dart" src="fx_dropdown_list.dart"></script>
</polymer-element>
